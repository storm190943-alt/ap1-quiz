<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHK AP1 Master 2026 - 100 Fragen Edition</title>
    <style>
        :root { --primary: #2563eb; --success: #16a34a; --error: #dc2626; --bg: #f8fafc; --text: #0f172a; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 20px; display: flex; justify-content: center; margin: 0; }
        .container { width: 100%; max-width: 900px; }
        .card { background: white; padding: 2.5rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); border: 1px solid #e2e8f0; }
        .hidden { display: none !important; }
        .btn { padding: 16px; border: none; border-radius: 12px; cursor: pointer; font-weight: 700; width: 100%; margin-top: 15px; font-size: 1.1rem; transition: 0.2s; }
        .primary-btn { background: var(--primary); color: white; }
        .secondary-btn { background: #334155; color: white; }
        .option-item { display: flex; align-items: center; padding: 18px; border: 2px solid #f1f5f9; border-radius: 12px; margin-bottom: 12px; cursor: pointer; background: #fff; transition: 0.2s; font-size: 1.05rem; }
        .option-item:hover { background: #f8fafc; border-color: #cbd5e1; }
        .option-item.selected { border-color: var(--primary); background: #eff6ff; }
        .correct-ui { border-color: var(--success) !important; background: #f0fdf4 !important; font-weight: bold; color: var(--success); }
        .wrong-ui { border-color: var(--error) !important; background: #fef2f2 !important; color: var(--error); }
        input[type="text"] { width: 100%; padding: 18px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1.1rem; outline: none; transition: 0.2s; }
        input[type="text"]:focus { border-color: var(--primary); }
        #explanation-box { background: #f8fafc; padding: 25px; border-radius: 12px; border-left: 8px solid var(--primary); margin-top: 25px; line-height: 1.7; font-size: 1rem; color: #334155; }
        .progress-bar { background: #e2e8f0; height: 10px; border-radius: 5px; margin-bottom: 30px; overflow: hidden; }
        #progress-fill { background: var(--primary); height: 100%; width: 0%; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        select { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #e2e8f0; font-size: 1rem; margin-bottom: 20px; appearance: none; background: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E") no-repeat right 15px center; }
    </style>
</head>
<body>
    <div class="container">
        <div id="setup-screen" class="card">
            <h1 style="color: var(--primary); margin-bottom: 10px;">IHK AP1 Master 2026</h1>
            <p style="margin-bottom: 30px; color: #64748b;">Vollst√§ndige Vorbereitung auf die Gestreckte Abschlusspr√ºfung Teil 1.</p>
            
            <label><b>Themenbereich w√§hlen:</b></label>
            <select id="topic-select">
                <option value="all">Gesamter Katalog (100 Fragen geshuffled)</option>
            </select>
            
            <button onclick="startQuiz('learn')" class="btn primary-btn">Lernmodus starten</button>
            <button onclick="startQuiz('exam')" class="btn secondary-btn">Simulation (20 Zufallsfragen)</button>
        </div>

        <div id="quiz-screen" class="card hidden">
            <div class="progress-bar"><div id="progress-fill"></div></div>
            <div id="meta" style="font-size: 0.8rem; color: #64748b; font-weight: 800; text-transform: uppercase; margin-bottom: 10px;"></div>
            <h2 id="question-text" style="margin-top:0; margin-bottom: 25px;"></h2>
            <div id="options-container"></div>
            <div id="feedback-area" class="hidden">
                <div id="explanation-box"></div>
            </div>
            <button id="check-btn" onclick="checkAnswer()" class="btn primary-btn">Antwort pr√ºfen</button>
            <button id="next-btn" onclick="nextQuestion()" class="btn primary-btn hidden">N√§chste Frage</button>
        </div>

        <div id="result-screen" class="card hidden" style="text-align: center;">
            <div style="font-size: 5rem;">üéØ</div>
            <h2 id="result-title">Ergebnis</h2>
            <p id="score-display" style="font-size: 1.3rem; margin-bottom: 30px;"></p>
            <button onclick="location.reload()" class="btn primary-btn">Zur√ºck zum Start</button>
        </div>
    </div>

<script>
const allQuestions = [
    // --- HARDWARE & INFRASTRUKTUR (1-15) ---
    { 
        chapter: "Hardware", type: "single", 
        question: "Welches USV-System (Unterbrechungsfreie Stromversorgung) bietet Schutz gegen Netzausfall, Spannungsschwankungen und Frequenzabweichungen durch dauerhafte Wandlung des Stroms?", 
        options: ["VFD (Voltage and Frequency Dependent)", "VI (Voltage Independent)", "VFI (Voltage and Frequency Independent)"], 
        correctAnswers: [2], 
        explanation: "VFI (Klasse 1) steht f√ºr 'Voltage and Frequency Independent'. Dieser Typ wird auch als Online-Dauerwandler bezeichnet. Die Eingangsspannung wird gleichgerichtet und sofort wieder wechselgerichtet, wodurch am Ausgang eine perfekte, von St√∂rungen isolierte Spannung anliegt. Es gibt keine Umschaltzeit bei Stromausfall." 
    },
    { 
        chapter: "Hardware", type: "input", 
        question: "Berechnen Sie die nutzbare Kapazit√§t in Terabyte (TB) eines RAID 5 Verbunds (Redundant Array of Independent Disks) mit 4 Festplatten √† 6 TB.", 
        correctAnswers: ["18"], 
        explanation: "Bei einem RAID 5 Verbund wird die Kapazit√§t einer Festplatte f√ºr die Parit√§tsinformationen (Fehlertoleranz) verwendet. Die Formel lautet: $(n - 1) \cdot \text{Kapazit√§t der kleinsten Platte}$. Hier: $(4 - 1) \cdot 6\text{ TB} = 18\text{ TB}$." 
    },
    
    { 
        chapter: "Hardware", type: "single", 
        question: "Wie wird die Architektur bezeichnet, bei der Befehle und Daten in physisch getrennten Speichereinheiten liegen?", 
        options: ["Von-Neumann-Architektur", "Harvard-Architektur", "RISC-Architektur"], 
        correctAnswers: [1], 
        explanation: "Die Harvard-Architektur nutzt getrennte Speicher und Bus-Systeme f√ºr Befehle und Daten. Dies erm√∂glicht das gleichzeitige Laden von Instruktionen und Bearbeiten von Daten, was den sogenannten Von-Neumann-Flaschenhals vermeidet." 
    },
    { 
        chapter: "Hardware", type: "input", 
        question: "Wie lautet der Fachbegriff f√ºr den Wert, der das Verh√§ltnis des Gesamtenergieverbrauchs eines Rechenzentrums zum Energieverbrauch der IT-Infrastruktur angibt?", 
        correctAnswers: ["PUE", "Power Usage Effectiveness"], 
        explanation: "Die Power Usage Effectiveness (PUE) ist die Kennzahl f√ºr die Energieeffizienz. Ein optimaler Wert liegt nahe 1.0, was bedeutet, dass fast die gesamte Energie f√ºr die Rechenleistung und nicht f√ºr K√ºhlung oder Licht verbraucht wird." 
    },
    { 
        chapter: "Hardware", type: "single", 
        question: "Welche Speicherart beh√§lt ihre Daten auch nach dem Abschalten der Stromzufuhr (Nicht-fl√ºchtiger Speicher)?", 
        options: ["RAM (Random Access Memory)", "SRAM (Static Random Access Memory)", "ROM (Read Only Memory)"], 
        correctAnswers: [2], 
        explanation: "ROM (Read Only Memory) ist ein Festwertspeicher, der Informationen dauerhaft speichert. Im Gegensatz dazu ist RAM (Random Access Memory) fl√ºchtig und verliert alle Inhalte, sobald die Spannung unterbrochen wird." 
    },

    // --- NETZWERKTECHNIK (16-35) ---
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Auf welcher Schicht des OSI-Referenzmodells (Open Systems Interconnection) arbeiten IP-Adressen (Internet Protocol)?", 
        options: ["Schicht 2 (Sicherungsschicht)", "Schicht 3 (Vermittlungsschicht)", "Schicht 4 (Transportschicht)"], 
        correctAnswers: [1], 
        explanation: "Die Vermittlungsschicht (Layer 3 / Network Layer) ist f√ºr das Routing und die logische Adressierung zust√§ndig. Hier wird das Internet Protocol (IP) eingesetzt, um Datenpakete √ºber Netzwerkgrenzen hinweg zu transportieren." 
    },
    { 
        chapter: "Netzwerk", type: "input", 
        question: "Wie viele nutzbare Host-Adressen bietet ein Subnetz mit der CIDR-Notation /27?", 
        correctAnswers: ["30"], 
        explanation: "Ein /27 Subnetz nutzt 27 Bits f√ºr das Netz, verbleiben 5 Bits f√ºr die Hosts ($32 - 27 = 5$). $2^5$ ergibt 32 Adressen. Davon m√ºssen die Netzwerk-ID und die Broadcast-Adresse abgezogen werden: $32 - 2 = 30$ nutzbare Adressen." 
    },
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Welches Protokoll wird zur automatischen Zuweisung von IP-Adressen (Internet Protocol) in einem lokalen Netzwerk verwendet?", 
        options: ["DNS (Domain Name System)", "DHCP (Dynamic Host Configuration Protocol)", "ARP (Address Resolution Protocol)"], 
        correctAnswers: [1], 
        explanation: "DHCP (Dynamic Host Configuration Protocol) erm√∂glicht die automatische Einbindung von Ger√§ten in ein bestehendes Netzwerk, indem es IP-Adressen, Subnetzmasken und Gateways dynamisch aus einem Pool zuweist." 
    },
    { 
        chapter: "Netzwerk", type: "input", 
        question: "Auf welchem Port kommuniziert das verschl√ºsselte Protokoll HTTPS (Hypertext Transfer Protocol Secure) standardm√§√üig?", 
        correctAnswers: ["443"], 
        explanation: "HTTPS nutzt den Port 443 f√ºr gesicherte Web-√úbertragungen (verschl√ºsselt via TLS/SSL), w√§hrend das unverschl√ºsselte HTTP den Port 80 verwendet." 
    },
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Was ist die Hauptaufgabe eines DNS (Domain Name System) im Internet?", 
        options: ["Verschl√ºsselung von Passw√∂rtern", "Aufl√∂sung von Domainnamen in IP-Adressen", "√úberwachung des Datenverkehrs"], 
        correctAnswers: [1], 
        explanation: "Das Domain Name System (DNS) fungiert als 'Telefonbuch' des Internets. Es √ºbersetzt menschenlesbare Adressen (z.B. www.google.de) in f√ºr Computer verst√§ndliche IP-Adressen." 
    },

    // --- IT-SICHERHEIT (36-50) ---
    { 
        chapter: "Security", type: "multi", 
        question: "Welche Schutzziele geh√∂ren zur CIA-Triade der Informationssicherheit? (Mehrfachwahl)", 
        options: ["Vertraulichkeit (Confidentiality)", "Integrit√§t (Integrity)", "Verf√ºgbarkeit (Availability)", "Anonymit√§t"], 
        correctAnswers: [0, 1, 2], 
        explanation: "Die CIA-Triade definiert die Basis der IT-Sicherheit: Vertraulichkeit (Schutz vor unbefugtem Zugriff), Integrit√§t (Schutz vor unbemerkter √Ñnderung) und Verf√ºgbarkeit (Systeme m√ºssen bei Bedarf funktionieren)." 
    },
    { 
        chapter: "Security", type: "single", 
        question: "Wie nennt man ein Verfahren, bei dem zwei unterschiedliche Schl√ºssel (Public Key und Private Key) f√ºr die Verschl√ºsselung genutzt werden?", 
        options: ["Symmetrische Verschl√ºsselung", "Asymmetrische Verschl√ºsselung", "Hashing-Verfahren"], 
        correctAnswers: [1], 
        explanation: "Die asymmetrische Verschl√ºsselung nutzt ein Schl√ºsselpaar. Der √∂ffentliche Schl√ºssel (Public Key) darf jedem bekannt sein und dient zum Verschl√ºsseln. Nur der Besitzer des passenden privaten Schl√ºssels (Private Key) kann die Daten wieder entschl√ºsseln." 
    },
    { 
        chapter: "Security", type: "input", 
        question: "Wie lautet der Fachbegriff f√ºr den Manipulationsversuch, bei dem Angreifer versuchen, durch T√§uschung (z.B. gef√§lschte E-Mails) sensible Daten von Personen zu erhalten?", 
        correctAnswers: ["Phishing"], 
        explanation: "Phishing ist eine Form des Social Engineering. Ziel ist es, den Benutzer zur Preisgabe von Login-Daten, Kreditkartennummern oder Passw√∂rtern zu bewegen, indem man eine vertrauensw√ºrdige Identit√§t vorgaukelt." 
    },
// --- KAPITEL 4: WIRTSCHAFT & RECHT (Fortsetzung) ---
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "Welche Sozialversicherung wird in Deutschland finanziell allein vom Arbeitgeber getragen?", 
        options: ["Gesetzliche Krankenversicherung", "Gesetzliche Rentenversicherung", "Gesetzliche Unfallversicherung"], 
        correctAnswers: [2], 
        explanation: "Die Gesetzliche Unfallversicherung ist die einzige S√§ule des Sozialversicherungssystems, deren Beitr√§ge zu 100 % vom Arbeitgeber an die Berufsgenossenschaften gezahlt werden. Sie sichert Arbeitsunf√§lle, Wegeunf√§lle und Berufskrankheiten ab." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie nennt man den rechtlichen Status, den ein Auszubildender nach Ablauf der Probezeit genie√üt, der eine ordentliche K√ºndigung durch den Betrieb fast unm√∂glich macht?", 
        correctAnswers: ["Besonderer K√ºndigungsschutz"], 
        explanation: "Nach der Probezeit kann ein Ausbildungsverh√§ltnis von Seiten des Ausbildenden (Betrieb) nur noch aus einem wichtigen Grund (fristlose K√ºndigung) beendet werden. Eine ordentliche K√ºndigung ist gesetzlich ausgeschlossen." 
    },
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "Welches √∂konomische Prinzip beschreibt das Ziel, einen vorgegebenen Erfolg mit m√∂glichst geringem Mitteleinsatz zu erreichen?", 
        options: ["Maximalprinzip", "Minimalprinzip", "Optimalprinzip"], 
        correctAnswers: [1], 
        explanation: "Das Minimalprinzip (Sparprinzip) besagt: Ein fest definiertes Ziel (z. B. Kauf eines bestimmten Laptops) soll mit minimalen Kosten bzw. Ressourcen erreicht werden." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Berechnen Sie den Deckungsbeitrag pro St√ºck, wenn der Verkaufspreis 150 Euro betr√§gt und die variablen Kosten bei 90 Euro liegen.", 
        correctAnswers: ["60"], 
        explanation: "Der Deckungsbeitrag (DB) berechnet sich aus: $\text{Verkaufspreis} - \text{variable Kosten}$. Hier: $150\text{ Euro} - 90\text{ Euro} = 60\text{ Euro}$. Dieser Betrag dient zur Deckung der Fixkosten." 
    },

    // --- KAPITEL 5: PROJEKTMANAGEMENT & UML (Unified Modeling Language) ---
    { 
        chapter: "Projektmanagement", type: "single", 
        question: "Welches Vorgehensmodell ist streng hierarchisch und schlie√üt eine Phase komplett ab, bevor die n√§chste beginnt?", 
        options: ["V-Modell", "Wasserfallmodell", "Scrum"], 
        correctAnswers: [1], 
        explanation: "Das Wasserfallmodell ist ein lineares Vorgehensmodell. Jede Phase (Anforderung, Design, Implementierung, Test, Betrieb) wird sequenziell durchlaufen. R√ºckspr√ºnge sind im klassischen Modell nicht vorgesehen." 
    },
    { 
        chapter: "Projektmanagement", type: "multi", 
        question: "Welche Rollen sind im agilen Framework Scrum fest definiert? (Mehrfachwahl)", 
        options: ["Product Owner", "Scrum Master", "Project Manager", "Developers (Entwicklungsteam)"], 
        correctAnswers: [0, 1, 3], 
        explanation: "Scrum kennt nur drei Rollen: Der Product Owner verwaltet das Backlog (Anforderungen), der Scrum Master sorgt f√ºr die Einhaltung des Prozesses, und die Developers setzen die Aufgaben technisch um. Einen klassischen Project Manager gibt es in Scrum nicht." 
    },
    { 
        chapter: "Projektmanagement", type: "single", 
        question: "Was stellt ein Klassendiagramm in der Unified Modeling Language (UML) prim√§r dar?", 
        options: ["Den zeitlichen Ablauf eines Programms", "Die statische Struktur eines Systems", "Das Verhalten der Benutzer"], 
        correctAnswers: [1], 
        explanation: "Das Klassendiagramm ist ein Strukturdiagramm. Es zeigt die Klassen eines Systems, deren Attribute, Methoden und die Beziehungen (Assoziationen) der Klassen untereinander." 
    },
    { 
        chapter: "Projektmanagement", type: "input", 
        question: "Wie nennt man in der Netzplantechnik den Puffer, der sich ergibt, wenn man die fr√ºheste Endzeit von der sp√§testen Endzeit abzieht?", 
        correctAnswers: ["Gesamtpuffer"], 
        explanation: "Der Gesamtpuffer gibt an, um wie viel Zeit ein Vorgang verschoben werden kann, ohne das Projektende zu gef√§hrden. Er berechnet sich aus: $\text{Sp√§tester Endzeitpunkt (SEZ)} - \text{Fr√ºhester Endzeitpunkt (FEZ)}$." 
    },

    // --- KAPITEL 6: DATENBANKEN & SQL (Structured Query Language) ---
    { 
        chapter: "Datenbanken", type: "single", 
        question: "Was garantiert die 'Referenzielle Integrit√§t' in einer relationalen Datenbank?", 
        options: ["Dass alle Datens√§tze verschl√ºsselt sind", "Dass Fremdschl√ºssel nur auf existierende Prim√§rschl√ºssel verweisen", "Dass die Datenbank besonders schnell ist"], 
        correctAnswers: [1], 
        explanation: "Referenzielle Integrit√§t stellt sicher, dass die Beziehungen zwischen Tabellen konsistent bleiben. Ein Fremdschl√ºssel darf nur Werte enthalten, die als Prim√§rschl√ºssel in der verkn√ºpften Tabelle tats√§chlich existieren." 
    },
    { 
        chapter: "Datenbanken", type: "input", 
        question: "Welches SQL-Schl√ºsselwort wird verwendet, um Duplikate aus einer Ergebnisliste zu entfernen?", 
        correctAnswers: ["DISTINCT"], 
        explanation: "Mit dem Befehl SELECT DISTINCT werden identische Zeilen im Abfrageergebnis zusammengefasst, sodass jeder Wert nur einmal ausgegeben wird." 
    },

    // --- KAPITEL 7: NETZWERK & PROTOKOLLE (Fortsetzung) ---
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Welche Topologie ben√∂tigt einen zentralen Kopplungspunkt (Switch) und f√ºhrt bei dessen Ausfall zum Stillstand des gesamten Netzwerks?", 
        options: ["Bus-Topologie", "Ring-Topologie", "Stern-Topologie"], 
        correctAnswers: [2], 
        explanation: "In einer Stern-Topologie sind alle Endger√§te mit einem zentralen Knoten (Switch/Hub) verbunden. F√§llt ein Kabel zu einem PC aus, betrifft das nur diesen PC. F√§llt jedoch der zentrale Knoten aus, bricht das gesamte Netz zusammen." 
    },
    { 
        chapter: "Netzwerk", type: "input", 
        question: "Wie lautet die Subnetzmaske in Dezimalschreibweise f√ºr ein Netzwerk mit der CIDR-Notation /24?", 
        correctAnswers: ["255.255.255.0"], 
        explanation: "Die CIDR-Notation (Classless Inter-Domain Routing) /24 bedeutet, dass die ersten 24 Bits der Maske auf 1 gesetzt sind. Das ergibt 3 Oktette √† 255 ($8 \text{ Bits} = 255$)." 
    },
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Welches Protokoll der Transportschicht arbeitet verbindungslos und bietet keine Garantie f√ºr die Paketzustellung?", 
        options: ["TCP (Transmission Control Protocol)", "UDP (User Datagram Protocol)", "IP (Internet Protocol)"], 
        correctAnswers: [1], 
        explanation: "Das User Datagram Protocol (UDP) ist schnell und effizient, da es keinen Verbindungsaufbau (Handshake) ben√∂tigt. Es wird oft f√ºr Streaming oder Online-Gaming genutzt, wo Geschwindigkeit wichtiger ist als Fehlerkorrektur." 
    },

    // --- KAPITEL 8: IT-SICHERHEIT & DATENSCHUTZ (Fortsetzung) ---
    { 
        chapter: "Security", type: "single", 
        question: "Was ist das Hauptziel eines DoS-Angriffs (Denial of Service)?", 
        options: ["Daten zu stehlen", "Einen Dienst durch √úberlastung unbrauchbar zu machen", "Passw√∂rter zu knacken"], 
        correctAnswers: [1], 
        explanation: "Bei einem Denial of Service (Dienstverweigerung) Angriff wird ein Server mit so vielen Anfragen gleichzeitig bombardiert, dass er die Last nicht mehr verarbeiten kann und f√ºr legitime Nutzer offline geht." 
    },
    { 
        chapter: "Security", type: "input", 
        question: "Wie nennt man die technische Ma√ünahme, bei der Daten durch einen Algorithmus in eine unverst√§ndliche Zeichenfolge umgewandelt werden, die nur mit einem Schl√ºssel lesbar ist?", 
        correctAnswers: ["Verschl√ºsselung", "Encryption"], 
        explanation: "Die Verschl√ºsselung sichert die Vertraulichkeit von Informationen. Nur wer im Besitz des passenden Schl√ºssels ist, kann den Geheimtext wieder in den lesbaren Klartext zur√ºckf√ºhren." 
    },

    // --- KAPITEL 9: GREEN IT & NACHHALTIGKEIT ---
    { 
        chapter: "Umwelt", type: "single", 
        question: "Was beschreibt der Begriff 'Green IT' prim√§r?", 
        options: ["Die Verwendung gr√ºner Geh√§use f√ºr Computer", "Ressourcenschonende und energieeffiziente Nutzung von Informationstechnik", "Das Verbot von Plastik in der Produktion"], 
        correctAnswers: [1], 
        explanation: "Green IT umfasst Bestrebungen, die Nutzung von Informationstechnik √ºber den gesamten Lebenszyklus hinweg (Produktion, Betrieb, Entsorgung) umwelt- und ressourcenschonend zu gestalten." 
    },

    // --- KAPITEL 10: CLOUD & VIRTUALISIERUNG ---
    { 
        chapter: "Cloud", type: "single", 
        question: "Welches Cloud-Modell bietet dem Kunden eine komplette Softwareanwendung √ºber das Internet an (z. B. Microsoft 365)?", 
        options: ["IaaS (Infrastructure as a Service)", "PaaS (Platform as a Service)", "SaaS (Software as a Service)"], 
        correctAnswers: [2], 
        explanation: "SaaS (Software as a Service) stellt fertige Anwendungen bereit. Der Nutzer muss sich weder um die Hardware (IaaS) noch um die Laufzeitumgebung (PaaS) k√ºmmern." 
    },
    { 
        chapter: "Cloud", type: "input", 
        question: "Wie nennt man die Software-Schicht, die es erm√∂glicht, mehrere virtuelle Maschinen auf einer physischen Hardware auszuf√ºhren?", 
        correctAnswers: ["Hypervisor"], 
        explanation: "Ein Hypervisor (auch Virtual Machine Monitor genannt) teilt die physischen Ressourcen (CPU, RAM, Festplatte) auf die verschiedenen Gast-Betriebssysteme auf." 
    },
    // --- KAPITEL 11: BIN√ÑRE SYSTEME & RECHNEN ---
    { 
        chapter: "Hardware", type: "input", 
        question: "Rechnen Sie die Dezimalzahl 13 in eine 4-Bit-Bin√§rzahl um.", 
        correctAnswers: ["1101"], 
        explanation: "Die Umrechnung erfolgt durch Zerlegung in Zweierpotenzen: $13 = 8 + 4 + 1$. Das entspricht $1 \cdot 2^3 + 1 \cdot 2^2 + 0 \cdot 2^1 + 1 \cdot 2^0$. Somit ergibt sich bin√§r: 1101." 
    },
    { 
        chapter: "Hardware", type: "input", 
        question: "Wie viele verschiedene Zust√§nde k√∂nnen mit 8 Bit (also 1 Byte) dargestellt werden?", 
        correctAnswers: ["256"], 
        explanation: "Die Anzahl der Zust√§nde berechnet sich aus $2^n$. Bei 8 Bit sind das $2^8 = 256$ m√∂gliche Kombinationen (Werte von 0 bis 255)." 
    },

    // --- KAPITEL 12: ARBEITSRECHT & GESETZE ---
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "In welchem Gesetz sind die Mindestinhalte eines Berufsausbildungsvertrages geregelt?", 
        options: ["BGB (B√ºrgerliches Gesetzbuch)", "BBiG (Berufsbildungsgesetz)", "BetrVG (Betriebsverfassungsgesetz)"], 
        correctAnswers: [1], 
        explanation: "Das Berufsbildungsgesetz (BBiG) bildet die rechtliche Grundlage f√ºr die Berufsausbildung in Deutschland. Es regelt unter anderem die Pflichten von Azubis und Betrieben sowie die Inhalte des Ausbildungsvertrages." 
    },
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "Bis zu welchem Alter gilt f√ºr Auszubildende das Jugendarbeitsschutzgesetz (JArbSchG)?", 
        options: ["Bis zum 16. Lebensjahr", "Bis zum 18. Lebensjahr", "Bis zum Ende der Ausbildung"], 
        correctAnswers: [1], 
        explanation: "Das Jugendarbeitsschutzgesetz (JArbSchG) gilt f√ºr Personen, die noch nicht 18 Jahre alt sind. Es enth√§lt besondere Schutzregeln zu Arbeitszeiten, Ruhepausen und Nachtarbeitsverboten." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie viele Wochen betr√§gt die gesetzliche K√ºndigungsfrist w√§hrend der Probezeit laut Berufsbildungsgesetz (BBiG)?", 
        correctAnswers: ["0", "keine"], 
        explanation: "W√§hrend der Probezeit kann das Berufsausbildungsverh√§ltnis von beiden Seiten jederzeit ohne Einhaltung einer K√ºndigungsfrist und ohne Angabe von Gr√ºnden schriftlich gek√ºndigt werden." 
    },

    // --- KAPITEL 13: NETZWERK-DETAILS & IPV6 ---
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Wie lang ist eine IPv6-Adresse (Internet Protocol Version 6) im Vergleich zu einer IPv4-Adresse?", 
        options: ["32 Bit", "64 Bit", "128 Bit"], 
        correctAnswers: [2], 
        explanation: "IPv6-Adressen sind 128 Bit lang und werden hexadezimal dargestellt (z. B. 2001:0db8...). IPv4-Adressen sind dagegen nur 32 Bit lang, was zur Knappheit der verf√ºgbaren Adressen f√ºhrte." 
    },
    
    { 
        chapter: "Netzwerk", type: "input", 
        question: "Wie nennt man die eindeutige Hardware-Adresse einer Netzwerkkarte, die weltweit nur einmal existiert?", 
        correctAnswers: ["MAC-Adresse", "Media Access Control"], 
        explanation: "Die MAC-Adresse (Media Access Control) ist die physikalische Adresse eines Netzwerkadapters. Sie besteht aus 48 Bit und wird meist hexadezimal angegeben (z. B. 08:00:27:A2:B3:C4)." 
    },
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Was ist die Funktion des Standard-Gateways in einer IP-Konfiguration?", 
        options: ["Verschl√ºsselung der Daten", "Weiterleitung von Paketen in andere (fremde) Netzwerke", "Zuweisung von IP-Adressen"], 
        correctAnswers: [1], 
        explanation: "Das Standard-Gateway (meist ein Router) ist der Knotenpunkt, an den alle Datenpakete gesendet werden, deren Ziel-IP-Adresse nicht im eigenen, lokalen Subnetz liegt." 
    },

    // --- KAPITEL 14: MARKETING & KUNDEN ---
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "Welches Modell beschreibt die Phasen der Werbewirkung mit: Attention, Interest, Desire, Action?", 
        options: ["Pareto-Prinzip", "AIDA-Modell", "Marketing-Mix"], 
        correctAnswers: [1], 
        explanation: "Das AIDA-Modell beschreibt die Stufen, die ein Kunde durchl√§uft: Aufmerksamkeit erregen (Attention), Interesse wecken (Interest), Besitzwunsch ausl√∂sen (Desire) und schlie√ülich die Kaufhandlung (Action)." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie nennt man den Marketing-Mix-Bereich, der sich mit der Preisgestaltung und Rabatten befasst?", 
        correctAnswers: ["Price", "Preispolitik"], 
        explanation: "Die Preispolitik (Price) ist einer der vier Bereiche des klassischen Marketing-Mix (4Ps: Product, Price, Place, Promotion)." 
    },

    // --- KAPITEL 15: VERTIEFUNG SOFTWARE & TESTEN ---
    { 
        chapter: "Entwicklung", type: "single", 
        question: "Wie nennt man einen Test, bei dem nur einzelne, isolierte Komponenten (z. B. eine einzelne Funktion) einer Software gepr√ºft werden?", 
        options: ["Integrationstest", "Unit-Test", "Systemtest"], 
        correctAnswers: [1], 
        explanation: "Ein Unit-Test (Modultest) pr√ºft die kleinste testbare Einheit einer Software. Das Ziel ist sicherzustellen, dass jede Funktion f√ºr sich korrekt arbeitet, bevor sie mit anderen Teilen verkn√ºpft wird." 
    },
    { 
        chapter: "Entwicklung", type: "input", 
        question: "Welches Zeichen wird in vielen Programmiersprachen als logischer Operator f√ºr das 'UND' (AND) verwendet?", 
        correctAnswers: ["&&"], 
        explanation: "Der Operator '&&' verkn√ºpft zwei Bedingungen. Das Gesamtergebnis ist nur dann 'wahr' (true), wenn beide Bedingungen gleichzeitig erf√ºllt sind." 
    },

    // --- KAPITEL 16: PROJEKTMANAGEMENT VERTIEFUNG ---
    { 
        chapter: "Projektmanagement", type: "single", 
        question: "Welches Diagramm eignet sich am besten zur Visualisierung des kritischen Pfades und zeitlicher Abh√§ngigkeiten von Aufgaben?", 
        options: ["Klassendiagramm", "Gantt-Diagramm", "Mind-Map"], 
        correctAnswers: [1], 
        explanation: "Ein Gantt-Diagramm stellt Aufgaben auf einer Zeitachse als Balken dar. Es zeigt Dauer, Start- und Endzeitpunkte sowie Abh√§ngigkeiten (welche Aufgabe muss fertig sein, bevor die n√§chste beginnt)." 
    },
    { 
        chapter: "Projektmanagement", type: "input", 
        question: "Wie hei√üt das Dokument, das zu Beginn eines Projekts vom Auftraggeber erstellt wird und die Anforderungen grob beschreibt?", 
        correctAnswers: ["Lastenheft"], 
        explanation: "Das Lastenheft beschreibt 'WAS' der Auftraggeber will (Anforderungen). Der Auftragnehmer antwortet darauf mit dem Pflichtenheft, das beschreibt 'WIE' die Anforderungen technisch umgesetzt werden." 
    },

    // --- KAPITEL 17: SECURITY VERTIEFUNG ---
    { 
        chapter: "Security", type: "single", 
        question: "Welche Art von Firewall analysiert nicht nur die IP-Adressen und Ports, sondern auch den tats√§chlichen Inhalt der Datenpakete (Nutzdaten)?", 
        options: ["Packet Filter", "Application Level Gateway", "Stateful Inspection"], 
        correctAnswers: [1], 
        explanation: "Ein Application Level Gateway (Proxy-Firewall) arbeitet auf der Anwendungsschicht. Sie kann den Datenstrom (z. B. HTTP-Aufrufe) analysieren und gezielt gef√§hrliche Inhalte oder Befehle blockieren." 
    },
    { 
        chapter: "Security", type: "input", 
        question: "Wie nennt man ein sicheres, verschl√ºsseltes Tunnel-Verfahren, um sich √ºber das √∂ffentliche Internet mit einem privaten Firmennetzwerk zu verbinden?", 
        correctAnswers: ["VPN", "Virtual Private Network"], 
        explanation: "Ein Virtual Private Network (VPN) erm√∂glicht den sicheren Fernzugriff. Die Daten werden verschl√ºsselt durch das Internet geleitet, als w√§re das Ger√§t direkt per Kabel mit dem Firmennetz verbunden." 
    },

    // --- KAPITEL 18: NACHHALTIGKEIT & ENTSORGUNG ---
    { 
        chapter: "Umwelt", type: "input", 
        question: "Wie hei√üt der Fachbegriff f√ºr die absichtliche Verk√ºrzung der Lebensdauer von Hardware durch den Hersteller?", 
        correctAnswers: ["Geplante Obsoleszenz"], 
        explanation: "Geplante Obsoleszenz bezeichnet eine Strategie, bei der Produkte so konstruiert werden, dass sie nach einer bestimmten Zeit kaputtgehen oder veralten, um den Neukauf anzuregen." 
    },

    // --- KAPITEL 19: HARDWARE SCHNITTSTELLEN ---
    { 
        chapter: "Hardware", type: "single", 
        question: "Welche Schnittstelle wird heute standardm√§√üig f√ºr den Anschluss von internen Massenspeichern (SSD/HDD) verwendet?", 
        options: ["IDE (Integrated Drive Electronics)", "SATA (Serial Advanced Technology Attachment)", "SCSI (Small Computer System Interface)"], 
        correctAnswers: [1], 
        explanation: "SATA (Serial Advanced Technology Attachment) ist der Standard f√ºr interne Laufwerke. Die aktuelle Version SATA III bietet √úbertragungsraten von bis zu 6 Gbit/s." 
    },
    { 
        chapter: "Hardware", type: "input", 
        question: "Welche Abk√ºrzung beschreibt den modernen Nachfolger des BIOS, der eine grafische Oberfl√§che und Mausbedienung bietet?", 
        correctAnswers: ["UEFI", "Unified Extensible Firmware Interface"], 
        explanation: "Das UEFI (Unified Extensible Firmware Interface) steuert den Boot-Vorgang und die Hardware-Initialisierung. Es bietet mehr Sicherheit (Secure Boot) und unterst√ºtzt gr√∂√üere Festplatten als das alte BIOS." 
    },
    // --- KAPITEL 20: SQL-VERTIEFUNG (JOINs & AGGREGATE) ---
    { 
        chapter: "Datenbanken", type: "single", 
        question: "Welcher JOIN-Typ in SQL (Structured Query Language) gibt alle Datens√§tze der linken Tabelle und die √ºbereinstimmenden Datens√§tze der rechten Tabelle zur√ºck?", 
        options: ["INNER JOIN", "LEFT JOIN", "RIGHT JOIN"], 
        correctAnswers: [1], 
        explanation: "Der LEFT JOIN (oder LEFT OUTER JOIN) stellt sicher, dass alle Zeilen der linken Tabelle im Ergebnis erscheinen. Gibt es keine Entsprechung in der rechten Tabelle, werden diese Felder mit NULL aufgef√ºllt." 
    },
    
    { 
        chapter: "Datenbanken", type: "input", 
        question: "Mit welcher SQL-Funktion ermittelt man die Anzahl der Zeilen in einer Tabelle?", 
        correctAnswers: ["COUNT", "COUNT(*)"], 
        explanation: "Die Aggregatfunktion COUNT(*) z√§hlt alle Datens√§tze einer Abfrage. Andere wichtige Funktionen sind SUM (Summe), AVG (Durchschnitt) sowie MIN und MAX." 
    },

    // --- KAPITEL 21: WEITERE NETZWERKTECHNIK (VLAN & WLAN) ---
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Was ist der Hauptvorteil eines VLAN (Virtual Local Area Network)?", 
        options: ["Erh√∂hung der Internetgeschwindigkeit", "Logische Trennung von Netzen auf demselben physischen Switch", "Einsparung von Stromkosten"], 
        correctAnswers: [1], 
        explanation: "Ein VLAN (Virtual Local Area Network) erlaubt es, ein physisches Netzwerk in mehrere logische Segmente zu unterteilen. Dies erh√∂ht die Sicherheit und reduziert Broadcast-Traffic, da Ger√§te nur innerhalb ihres VLANs kommunizieren k√∂nnen." 
    },
    { 
        chapter: "Netzwerk", type: "single", 
        question: "Welcher aktuelle WLAN-Standard (Wireless Local Area Network) wird auch als Wi-Fi 6 bezeichnet?", 
        options: ["IEEE 802.11n", "IEEE 802.11ac", "IEEE 802.11ax"], 
        correctAnswers: [2], 
        explanation: "IEEE 802.11ax ist der technische Name f√ºr Wi-Fi 6. Er bietet h√∂here Datenraten, bessere Effizienz in dicht besiedelten Gebieten und eine l√§ngere Akkulaufzeit f√ºr mobile Endger√§te." 
    },

    // --- KAPITEL 22: MARKT & WETTBEWERB ---
    { 
        chapter: "Wirtschaft", type: "single", 
        question: "Wie nennt man eine Marktform, bei der es viele kleine Anbieter und viele kleine Nachfrager gibt?", 
        options: ["Monopol", "Oligopol", "Polypol"], 
        correctAnswers: [2], 
        explanation: "Das Polypol ist die Idealform des Wettbewerbs. Da es viele Marktteilnehmer gibt, hat kein einzelner Anbieter genug Macht, um den Preis allein zu diktieren (vollkommener Wettbewerb)." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "In welcher Phase des Konjunkturzyklus steigen die Zinsen, die Kapazit√§ten sind voll ausgelastet und es herrscht Vollbesch√§ftigung?", 
        correctAnswers: ["Hochkonjunktur", "Boom"], 
        explanation: "Die Hochkonjunktur (Boom) ist der H√∂hepunkt des Wirtschaftszyklus. Danach folgt meist die Phase des Abschwungs (Rezession)." 
    },
    

    // --- KAPITEL 23: LOGIK & SCHALTUNGEN ---
    { 
        chapter: "Hardware", type: "single", 
        question: "Welches logische Gatter liefert nur dann eine '1' (True) am Ausgang, wenn genau einer der beiden Eing√§nge '1' ist, aber nicht beide?", 
        options: ["AND (UND)", "OR (ODER)", "XOR (Exklusiv-ODER)"], 
        correctAnswers: [2], 
        explanation: "Das XOR-Gatter (Antivalenz) pr√ºft auf Ungleichheit. Sind beide Eing√§nge gleich (0/0 oder 1/1), ist das Ergebnis 0. Sind sie verschieden, ist das Ergebnis 1." 
    },
    


    // --- KAPITEL 24: BACKUP & DATENSICHERUNG ---
    { 
        chapter: "Security", type: "single", 
        question: "Welche Backup-Methode sichert alle Daten, die sich seit der letzten VOLL-Sicherung ge√§ndert haben, und w√§chst daher t√§glich an?", 
        options: ["Inkrementelle Sicherung", "Differenzielle Sicherung", "Spiegelung"], 
        correctAnswers: [1], 
        explanation: "Die differenzielle Sicherung speichert alle √Ñnderungen seit dem letzten Full-Backup. Zur Wiederherstellung werden nur zwei Teile ben√∂tigt: Das Full-Backup und das letzte Differenzial-Backup." 
    },
    { 
        chapter: "Security", type: "input", 
        question: "Wie lautet die 3-2-1-Regel f√ºr Backups? (Anzahl der Kopien / Medien / Orte)", 
        correctAnswers: ["3 Kopien, 2 Medien, 1 externer Ort"], 
        explanation: "Die 3-2-1-Regel besagt: Erstelle 3 Kopien deiner Daten, speichere sie auf 2 verschiedenen Medientypen (z.B. Festplatte und Cloud) und bewahre 1 Kopie an einem externen Ort auf." 
    },

    // --- KAPITEL 25: MALWARE & BEDROHUNGEN ---
    { 
        chapter: "Security", type: "single", 
        question: "Wie nennt man Schadsoftware, die sich selbstst√§ndig √ºber Netzwerke verbreitet, ohne dass eine Wirtsdatei oder Nutzerinteraktion n√∂tig ist?", 
        options: ["Virus", "Wurm", "Trojaner"], 
        correctAnswers: [1], 
        explanation: "Ein Computerwurm nutzt Sicherheitsl√ºcken in Netzwerkdiensten, um sich aktiv von System zu System zu kopieren. Ein Virus ben√∂tigt hingegen eine Wirtsdatei (z.B. eine .exe), die vom Nutzer ausgef√ºhrt werden muss." 
    },
    { 
        chapter: "Security", type: "input", 
        question: "Welcher Begriff beschreibt Schadsoftware, die Daten verschl√ºsselt und f√ºr die Freigabe ein L√∂segeld fordert?", 
        correctAnswers: ["Ransomware"], 
        explanation: "Ransomware (Erpressungssoftware) ist eine der gr√∂√üten Bedrohungen. Sie verschl√ºsselt Festplatten und fordert meist Kryptow√§hrungen als L√∂segeld f√ºr den Entschl√ºsselungscode." 
    },

    // --- KAPITEL 26: QUALIT√ÑTSMANAGEMENT ---
    { 
        chapter: "Projektmanagement", type: "input", 
        question: "Wie hei√üt der kontinuierliche Verbesserungsprozess, der aus den Phasen Plan, Do, Check und Act besteht?", 
        correctAnswers: ["PDCA", "Deming-Kreis"], 
        explanation: "Der PDCA-Zyklus (Plan-Do-Check-Act) ist das Standardmodell f√ºr Qualit√§tsmanagement. Es sorgt daf√ºr, dass Prozesse st√§ndig analysiert und verbessert werden." 
    },

        // --- KAPITEL 27: HARDWARE & MONITORE ---
    { 
        chapter: "Hardware", type: "single", 
        question: "Welche Display-Technologie ben√∂tigt keine Hintergrundbeleuchtung, da jedes Pixel selbst leuchtet?", 
        options: ["LCD (Liquid Crystal Display)", "TFT (Thin Film Transistor)", "OLED (Organic Light Emitting Diode)"], 
        correctAnswers: [2], 
        explanation: "OLED-Displays (Organic Light Emitting Diode) bestehen aus organischen Halbleitern, die selbst Licht emittieren. Dadurch erreichen sie perfektes Schwarz und sehr hohe Kontraste, da schwarze Pixel einfach ausgeschaltet bleiben." 
    },
    { 
        chapter: "Hardware", type: "input", 
        question: "Welche Schnittstelle √ºbertr√§gt sowohl Video- als auch Audiosignale digital und ist der Standard f√ºr moderne Monitore und Fernseher?", 
        correctAnswers: ["HDMI", "High Definition Multimedia Interface"], 
        explanation: "HDMI (High Definition Multimedia Interface) ist der g√§ngigste Standard im Consumer-Bereich. Im Profi-IT-Bereich wird oft auch DisplayPort verwendet." 
    },

    // --- KAPITEL 28: ERP & CRM SYSTEME ---
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie nennt man Softwarel√∂sungen, die alle gesch√§ftlichen Abl√§ufe (Einkauf, Personal, Verkauf) in einer zentralen Datenbank abbilden?", 
        correctAnswers: ["ERP", "Enterprise Resource Planning"], 
        explanation: "ERP-Systeme (wie z.B. SAP) integrieren alle Abteilungen eines Unternehmens. Dadurch werden Datenredundanzen vermieden und Gesch√§ftsprozesse effizienter gesteuert." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie nennt man Systeme, die speziell zur Pflege und Verwaltung von Kundenbeziehungen dienen?", 
        correctAnswers: ["CRM", "Customer Relationship Management"], 
        explanation: "CRM-Systeme (Customer Relationship Management) speichern alle Interaktionen mit einem Kunden, um Marketing und Vertrieb gezielter steuern zu k√∂nnen." 
    },

    // --- KAPITEL 29: FINALE PR√úFUNGSFRAGEN (ZUSAMMENFASSUNG) ---
    { 
        chapter: "Security", type: "single", 
        question: "Welches Verfahren erh√∂ht die Sicherheit beim Login, indem neben dem Passwort ein zweiter Faktor (z. B. SMS-Code oder App) verlangt wird?", 
        options: ["Single Sign-On", "Multi-Faktor-Authentisierung (MFA)", "Biometrie"], 
        correctAnswers: [1], 
        explanation: "Die Multi-Faktor-Authentisierung (MFA) stellt sicher, dass ein gestohlenes Passwort allein nicht ausreicht, um Zugriff auf ein Konto zu erhalten." 
    },
    { 
        chapter: "Netzwerk", type: "input", 
        question: "Wie lautet die Portnummer f√ºr das unverschl√ºsselte Web-Protokoll HTTP?", 
        correctAnswers: ["80"], 
        explanation: "HTTP (Hypertext Transfer Protocol) nutzt standardm√§√üig Port 80. Die verschl√ºsselte Variante HTTPS nutzt Port 443." 
    },
    { 
        chapter: "Hardware", type: "single", 
        question: "Was beschreibt der Begriff 'Formfaktor' bei einem Mainboard?", 
        options: ["Die Rechenleistung des Chipsatzes", "Die physischen Abmessungen und Befestigungspunkte", "Die maximale Anzahl an USB-Anschl√ºssen"], 
        correctAnswers: [1], 
        explanation: "Der Formfaktor (z.B. ATX, Micro-ATX, ITX) legt die Gr√∂√üe des Mainboards und die Position der Bohrl√∂cher fest, damit es in das entsprechende Geh√§use passt." 
    },
    { 
        chapter: "Wirtschaft", type: "input", 
        question: "Wie nennt man das rechtlich verbindliche Dokument, das ein Angebot eines Kunden an einen Lieferanten darstellt?", 
        correctAnswers: ["Bestellung"], 
        explanation: "Eine Bestellung ist eine Willenserkl√§rung des K√§ufers, Waren oder Dienstleistungen zu den angegebenen Bedingungen abzunehmen." 
    }
];    // HINWEIS: Weitere 87 Fragen werden im n√§chsten Schritt bereitgestellt!

let currentQuestions = [];
let currentIdx = 0;
let score = 0;

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function initTopics() {
    const select = document.getElementById('topic-select');
    const chapters = [...new Set(allQuestions.map(q => q.chapter))];
    chapters.forEach(ch => {
        const opt = document.createElement('option');
        opt.value = ch;
        opt.innerText = ch;
        select.appendChild(opt);
    });
}

function startQuiz(mode) {
    const selectedTopic = document.getElementById('topic-select').value;
    currentQuestions = selectedTopic === "all" ? [...allQuestions] : allQuestions.filter(q => q.chapter === selectedTopic);
    
    shuffle(currentQuestions);
    if(mode === 'exam') currentQuestions = currentQuestions.slice(0, 20);

    currentIdx = 0;
    score = 0;
    document.getElementById('setup-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    showQuestion();
}

function showQuestion() {
    const q = currentQuestions[currentIdx];
    document.getElementById('meta').innerText = `${q.chapter} ‚Ä¢ FRAGE ${currentIdx + 1} VON ${currentQuestions.length}`;
    document.getElementById('question-text').innerText = q.question;
    document.getElementById('progress-fill').style.width = `${(currentIdx / currentQuestions.length) * 100}%`;
    
    const container = document.getElementById('options-container');
    container.innerHTML = '';
    
    if(q.type === 'input') {
        container.innerHTML = `<input type="text" id="user-input" placeholder="Antwort hier eingeben..." autofocus autocomplete="off">`;
    } else {
        const shuffledOptions = q.options.map((text, i) => ({ text, i }));
        shuffle(shuffledOptions);

        shuffledOptions.forEach(opt => {
            const div = document.createElement('div');
            div.className = 'option-item';
            div.innerText = opt.text;
            div.dataset.origIdx = opt.i;
            div.onclick = function() {
                document.querySelectorAll('.option-item').forEach(el => el.classList.remove('selected'));
                this.classList.add('selected');
            };
            container.appendChild(div);
        });
    }
    document.getElementById('feedback-area').classList.add('hidden');
    document.getElementById('check-btn').classList.remove('hidden');
    document.getElementById('next-btn').classList.add('hidden');
}

function checkAnswer() {
    const q = currentQuestions[currentIdx];
    let isCorrect = false;

    if(q.type === 'input') {
        const val = document.getElementById('user-input').value.trim().toLowerCase();
        isCorrect = q.correctAnswers.some(a => a.toLowerCase() === val);
    } else {
        const sel = document.querySelector('.option-item.selected');
        if(!sel) return alert("Bitte eine Antwort w√§hlen!");
        const selIdx = parseInt(sel.dataset.origIdx);
        isCorrect = q.correctAnswers.includes(selIdx);

        document.querySelectorAll('.option-item').forEach(el => {
            const idx = parseInt(el.dataset.origIdx);
            if(q.correctAnswers.includes(idx)) el.classList.add('correct-ui');
            else if(el.classList.contains('selected')) el.classList.add('wrong-ui');
        });
    }

    if(isCorrect) score++;
    document.getElementById('explanation-box').innerHTML = `<b>${isCorrect ? '‚úÖ Richtig!' : '‚ùå Nicht korrekt.'}</b><br><br>${q.explanation}`;
    document.getElementById('feedback-area').classList.remove('hidden');
    document.getElementById('check-btn').classList.add('hidden');
    document.getElementById('next-btn').classList.remove('hidden');
}

function nextQuestion() {
    currentIdx++;
    if(currentIdx < currentQuestions.length) showQuestion();
    else showResults();
}

function showResults() {
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.remove('hidden');
    const p = Math.round((score / currentQuestions.length) * 100);
    document.getElementById('score-display').innerHTML = `Du hast <b>${score}</b> von <b>${currentQuestions.length}</b> richtig.<br><br><span style="font-size:3rem; color:var(--primary)">${p}%</span>`;
}

window.onload = initTopics;
</script>
</body>
</html>
