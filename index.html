<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHK AP1 Trainer - 2026 Edition</title>
    <style>
        :root { --primary: #2563eb; --success: #16a34a; --error: #dc2626; --bg: #f1f5f9; --text: #0f172a; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 10px; display: flex; justify-content: center; margin: 0; }
        .container { width: 100%; max-width: 700px; padding-top: 20px; }
        .card { background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-top: 10px; }
        .hidden { display: none !important; }
        .btn { padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; font-size: 1rem; transition: background 0.2s; -webkit-tap-highlight-color: transparent; }
        .primary-btn { background: var(--primary); color: white; }
        .primary-btn:hover { background: #1d4ed8; }
        .option-item { display: flex; align-items: center; padding: 15px; border: 2px solid #e2e8f0; border-radius: 10px; margin-bottom: 12px; cursor: pointer; background: #fff; transition: 0.2s; position: relative; }
        .option-item:hover { border-color: #cbd5e1; }
        .option-item.selected { border-color: var(--primary); background: #eff6ff; }
        .correct-ui { border-color: var(--success) !important; background: #f0fdf4 !important; border-width: 3px; }
        .wrong-ui { border-color: var(--error) !important; background: #fef2f2 !important; }
        input[type="checkbox"], input[type="radio"] { margin-right: 15px; transform: scale(1.3); cursor: pointer; pointer-events: none; }
        #explanation-box { background: #f8fafc; padding: 15px; border-left: 5px solid var(--primary); margin-top: 15px; font-size: 0.95rem; line-height: 1.5; border-radius: 0 8px 8px 0; }
        .progress-bar { background: #e2e8f0; height: 10px; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        #progress-fill { background: var(--primary); height: 100%; width: 0%; transition: 0.4s; }
        h1, h2 { margin-top: 0; }
    </style>
</head>
<body>
    <div class="container">
        <div id="setup-screen" class="card">
            <h1>IHK AP1 PrÃ¼fungstrainer</h1>
            <p>Themen nach dem 2025/26 PrÃ¼fungskatalog.</p>
            <div style="margin-bottom: 20px;">
                <label style="font-weight:600">Bereich wÃ¤hlen:</label>
                <select id="topic-select" class="btn" style="background: white; border: 2px solid #e2e8f0; text-align: left;"></select>
            </div>
            <button onclick="startQuiz('learn')" class="btn primary-btn">Lernmodus starten</button>
            <button onclick="startQuiz('exam')" class="btn" style="background: #64748b; color: white;">PrÃ¼fungsmodus</button>
        </div>

        <div id="quiz-screen" class="card hidden">
            <div class="progress-bar"><div id="progress-fill"></div></div>
            <div id="meta" style="font-size: 0.85rem; color: #64748b; margin-bottom: 8px; font-weight: bold;"></div>
            <h2 id="question-text"></h2>
            <div id="options-container"></div>
            
            <div id="feedback-area" class="hidden">
                <p id="feedback-text" style="font-weight: bold; font-size: 1.1rem; border-top: 1px solid #eee; pt: 15px;"></p>
                <div id="explanation-box"></div>
            </div>

            <button id="check-btn" onclick="checkAnswer()" class="btn primary-btn">PrÃ¼fen</button>
            <button id="next-btn" onclick="nextQuestion()" class="btn primary-btn hidden">Weiter</button>
        </div>

        <div id="result-screen" class="card hidden">
            <h2>Abschluss-Auswertung</h2>
            <p id="score-display" style="font-size: 1.3rem;"></p>
            <button onclick="location.reload()" class="btn primary-btn">Neustart</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            {
                chapter: "Hardware",
                type: "multi",
                question: "Welche RAID-Level benÃ¶tigen mindestens 3 Festplatten?",
                options: ["RAID 0", "RAID 1", "RAID 5", "RAID 6", "RAID 10"],
                correctAnswers: [2, 3, 4],
                explanation: "RAID 5 (min. 3), RAID 6 (min. 4) und RAID 10 (min. 4) benÃ¶tigen mehr als zwei Platten. RAID 0 und 1 funktionieren bereits mit 2 Platten."
            },
            {
                chapter: "Netzwerk",
                type: "single",
                question: "Was ist die korrekte Subnetzmaske fÃ¼r ein /27 Netzwerk?",
                options: ["255.255.255.192", "255.255.255.224", "255.255.255.240", "255.255.255.128"],
                correctAnswers: [1],
                explanation: "/27 bedeutet 24 Bit (255.255.255) + 3 Bit im letzten Oktett (128+64+32 = 224)."
            },
            {
                chapter: "Wirtschaft",
                type: "single",
                question: "Wie hoch ist die aktuelle Beitragsbemessungsgrenze in der Rentenversicherung (West) ca.?",
                options: ["3.500 â‚¬", "5.200 â‚¬", "8.050 â‚¬", "12.000 â‚¬"],
                correctAnswers: [2],
                explanation: "Die Beitragsbemessungsgrenzen werden jÃ¤hrlich angepasst, liegen aber fÃ¼r die RV deutlich Ã¼ber 7000-8000 Euro pro Monat."
            },
            {
                chapter: "IT-Sicherheit",
                type: "multi",
                question: "Welche Verfahren sind asymmetrische VerschlÃ¼sselungsmethoden?",
                options: ["AES", "RSA", "Diffie-Hellman", "DES", "ECC"],
                correctAnswers: [1, 2, 4],
                explanation: "RSA, Diffie-Hellman und ECC nutzen ein SchlÃ¼sselpaar (Public/Private). AES und DES sind symmetrisch."
            },
            {
                chapter: "Projektmanagement",
                type: "single",
                question: "Was beschreibt der 'RÃ¼ckwÃ¤rtspass' in der Netzplantechnik?",
                options: ["Berechnung der frÃ¼hestmÃ¶glichen Termine.", "Berechnung der spÃ¤testmÃ¶glichen Termine.", "Ermittlung der Kosten.", "Optimierung der Ressourcen."],
                correctAnswers: [1],
                explanation: "Der VorwÃ¤rtspass berechnet die frÃ¼hesten Termine, der RÃ¼ckwÃ¤rtspass ausgehend vom Projektende die spÃ¤testmÃ¶glichen (SEZ/SAZ)."
            }
        ];

        let quizData = [];
        let currentIndex = 0;
        let score = 0;
        let mode = 'learn';

        window.onload = function() {
            const select = document.getElementById('topic-select');
            const chapters = ["Alle Themen", ...new Set(allQuestions.map(q => q.chapter))];
            chapters.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c === "Alle Themen" ? "all" : c;
                opt.innerText = c;
                select.appendChild(opt);
            });
        };

        window.startQuiz = function(m) {
            mode = m;
            const filter = document.getElementById('topic-select').value;
            quizData = filter === 'all' ? [...allQuestions] : allQuestions.filter(q => q.chapter === filter);
            quizData.sort(() => Math.random() - 0.5);
            currentIndex = 0; score = 0;
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        };

        function showQuestion() {
            const q = quizData[currentIndex];
            document.getElementById('progress-fill').style.width = `${(currentIndex / quizData.length) * 100}%`;
            document.getElementById('meta').innerText = `${q.chapter.toUpperCase()} | FRAGE ${currentIndex + 1} / ${quizData.length}`;
            document.getElementById('question-text').innerText = q.question;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'option-item';
                div.innerHTML = `<input type="${q.type === 'multi' ? 'checkbox' : 'radio'}" id="opt${idx}"> <label>${opt}</label>`;
                div.onclick = function() {
                    const input = this.querySelector('input');
                    if(q.type === 'single') {
                        container.querySelectorAll('.option-item').forEach(i => {
                            i.classList.remove('selected');
                            i.querySelector('input').checked = false;
                        });
                        input.checked = true;
                    } else {
                        input.checked = !input.checked;
                    }
                    this.classList.toggle('selected', input.checked);
                };
                container.appendChild(div);
            });
            document.getElementById('feedback-area').classList.add('hidden');
            document.getElementById('check-btn').classList.remove('hidden');
            document.getElementById('next-btn').classList.add('hidden');
        }

        window.checkAnswer = function() {
            const q = quizData[currentIndex];
            const items = document.querySelectorAll('.option-item');
            const selected = [];
            items.forEach((item, idx) => { if(item.querySelector('input').checked) selected.push(idx); });
            if(selected.length === 0) return alert("Bitte wÃ¤hle eine Antwort!");
            const isCorrect = JSON.stringify(selected.sort()) === JSON.stringify(q.correctAnswers.sort());
            if(isCorrect) score++;
            if(mode === 'learn') {
                items.forEach((item, idx) => {
                    if(q.correctAnswers.includes(idx)) item.classList.add('correct-ui');
                    else if(selected.includes(idx)) item.classList.add('wrong-ui');
                });
                document.getElementById('feedback-area').classList.remove('hidden');
                document.getElementById('feedback-text').innerHTML = isCorrect ? "<span style='color:var(--success)'>âœ” RICHTIG</span>" : "<span style='color:var(--error)'>âœ– FALSCH</span>";
                document.getElementById('explanation-box').innerText = q.explanation;
                document.getElementById('check-btn').classList.add('hidden');
                document.getElementById('next-btn').classList.remove('hidden');
            } else { nextQuestion(); }
        };

        window.nextQuestion = function() {
            currentIndex++;
            if(currentIndex < quizData.length) showQuestion();
            else showResult();
        };

        function showResult() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            const p = Math.round((score/quizData.length)*100);
            document.getElementById('score-display').innerHTML = `Du hast <b>${score} von ${quizData.length}</b> richtig (${p}%).<br>${p >= 50 ? 'Bestanden! ðŸŽ‰' : 'Nochmal Ã¼ben! ðŸ“š'}`;
        }
    </script>
</body>
</html>
